{% extends "base.html" %}

{% block title %}My Profile - NutriGuide{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card">
            <div class="card-header bg-blue text-white">
                <h1 class="h3 mb-0">My Profile</h1>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('profile') }}" class="needs-validation" novalidate>
                    {{ form.hidden_tag() }}
                    
                    <div class="row mb-4">
                        <div class="col-12 text-center mb-4">
                            <div class="profile-avatar mx-auto">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3 class="mt-2">{{ current_user.username }}</h3>
                            <p class="text-muted">Member since {{ current_user.created_at.strftime('%B %d, %Y') }}</p>
                        </div>
                    </div>
                    
                    <h4 class="text-green mb-3">Personal Information</h4>
                    
                    <div class="row mb-3">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">Full Name</label>
                            {{ form.name(class="form-control", id="name", placeholder="Enter your full name") }}
                            <div class="invalid-feedback">
                                {% for error in form.name.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="age" class="form-label">Age</label>
                            {{ form.age(class="form-control", id="age", placeholder="Enter your age") }}
                            <div class="invalid-feedback">
                                {% for error in form.age.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6 mb-3">
                            <label for="gender" class="form-label">Gender</label>
                            {{ form.gender(class="form-select", id="gender") }}
                            <div class="invalid-feedback">
                                {% for error in form.gender.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="activity_level" class="form-label">Activity Level</label>
                            {{ form.activity_level(class="form-select", id="activity_level") }}
                            <div class="invalid-feedback">
                                {% for error in form.activity_level.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                            <div class="form-text">This helps us calculate your calorie needs.</div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6 mb-3">
                            <label for="weight" class="form-label">Weight (kg)</label>
                            {{ form.weight(class="form-control", id="weight", placeholder="Enter your weight in kg") }}
                            <div class="invalid-feedback">
                                {% for error in form.weight.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="height" class="form-label">Height (cm)</label>
                            {{ form.height(class="form-control", id="height", placeholder="Enter your height in cm") }}
                            <div class="invalid-feedback">
                                {% for error in form.height.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="text-green mb-3 mt-4">Dietary Preferences</h4>
                    
                    <div class="row mb-3">
                        <div class="col-md-6 mb-3">
                            <label for="diet_type" class="form-label">Diet Type</label>
                            {{ form.diet_type(class="form-select", id="diet_type") }}
                            <div class="invalid-feedback">
                                {% for error in form.diet_type.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                            <div class="form-text">Select the diet type that best matches your eating habits.</div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="health_goals" class="form-label">Health Goals</label>
                            {{ form.health_goals(class="form-control", id="health_goals", placeholder="e.g., weight loss, muscle gain, better energy") }}
                            <div class="invalid-feedback">
                                {% for error in form.health_goals.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="allergies" class="form-label">Allergies or Food Restrictions</label>
                        {{ form.allergies(class="form-control", id="allergies", rows="3", placeholder="List any food allergies or restrictions") }}
                        <div class="invalid-feedback">
                            {% for error in form.allergies.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                        <div class="form-text">This helps us avoid recommending foods you can't eat.</div>
                    </div>
                    
                    <div class="d-grid gap-2">
                        {{ form.submit(class="btn btn-primary btn-lg") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
